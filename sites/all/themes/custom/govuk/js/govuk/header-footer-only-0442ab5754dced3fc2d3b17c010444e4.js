/**
	 * jQuery BASE64 functions
	 * 
	 * 	<code>
	 * 		Encodes the given data with base64. 
	 * 		String $.base64Encode ( String str )
	 *		<br />
	 * 		Decodes a base64 encoded data.
	 * 		String $.base64Decode ( String str )
	 * 	</code>
	 * 
	 * Encodes and Decodes the given data in base64.
	 * This encoding is designed to make binary data survive transport through transport layers that are not 8-bit clean, such as mail bodies.
	 * Base64-encoded data takes about 33% more space than the original data. 
	 * This javascript code is used to encode / decode data using base64 (this encoding is designed to make binary data survive transport through transport layers that are not 8-bit clean). Script is fully compatible with UTF-8 encoding. You can use base64 encoded data as simple encryption mechanism.
	 * If you plan using UTF-8 encoding in your project don't forget to set the page encoding to UTF-8 (Content-Type meta tag). 
	 * This function orginally get from the WebToolkit and rewrite for using as the jQuery plugin.
	 * 
	 * Example
	 * 	Code
	 * 		<code>
	 * 			$.base64Encode("I'm Persian."); 
	 * 		</code>
	 * 	Result
	 * 		<code>
	 * 			"SSdtIFBlcnNpYW4u"
	 * 		</code>
	 * 	Code
	 * 		<code>
	 * 			$.base64Decode("SSdtIFBlcnNpYW4u");
	 * 		</code>
	 * 	Result
	 * 		<code>
	 * 			"I'm Persian."
	 * 		</code>
	 * 
	 * @alias Muhammad Hussein Fattahizadeh < muhammad [AT] semnanweb [DOT] com >
	 * @link http://www.semnanweb.com/jquery-plugin/base64.html
	 * @see http://www.webtoolkit.info/
	 * @license http://www.gnu.org/licenses/gpl.html [GNU General Public License]
	 * @param {jQuery} {base64Encode:function(input))
	 * @param {jQuery} {base64Decode:function(input))
	 * @return string
	 */
(function (e) { var t = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", n = function (e) { e = e.replace(/\x0d\x0a/g, "\n"); var t = ""; for (var n = 0; n < e.length; n++) { var r = e.charCodeAt(n); r < 128 ? t += String.fromCharCode(r) : r > 127 && r < 2048 ? (t += String.fromCharCode(r >> 6 | 192), t += String.fromCharCode(r & 63 | 128)) : (t += String.fromCharCode(r >> 12 | 224), t += String.fromCharCode(r >> 6 & 63 | 128), t += String.fromCharCode(r & 63 | 128)) } return t }, r = function (e) { var t = "", n = 0, r = c1 = c2 = 0; while (n < e.length) r = e.charCodeAt(n), r < 128 ? (t += String.fromCharCode(r), n++) : r > 191 && r < 224 ? (c2 = e.charCodeAt(n + 1), t += String.fromCharCode((r & 31) << 6 | c2 & 63), n += 2) : (c2 = e.charCodeAt(n + 1), c3 = e.charCodeAt(n + 2), t += String.fromCharCode((r & 15) << 12 | (c2 & 63) << 6 | c3 & 63), n += 3); return t }; e.extend({ base64Encode: function (e) { var r = "", i, s, o, u, a, f, l, c = 0; e = n(e); while (c < e.length) i = e.charCodeAt(c++), s = e.charCodeAt(c++), o = e.charCodeAt(c++), u = i >> 2, a = (i & 3) << 4 | s >> 4, f = (s & 15) << 2 | o >> 6, l = o & 63, isNaN(s) ? f = l = 64 : isNaN(o) && (l = 64), r = r + t.charAt(u) + t.charAt(a) + t.charAt(f) + t.charAt(l); return r }, base64Decode: function (e) { var n = "", i, s, o, u, a, f, l, c = 0; e = e.replace(/[^A-Za-z0-9\+\/\=]/g, ""); while (c < e.length) u = t.indexOf(e.charAt(c++)), a = t.indexOf(e.charAt(c++)), f = t.indexOf(e.charAt(c++)), l = t.indexOf(e.charAt(c++)), i = u << 2 | a >> 4, s = (a & 15) << 4 | f >> 2, o = (f & 3) << 6 | l, n += String.fromCharCode(i), f != 64 && (n += String.fromCharCode(s)), l != 64 && (n += String.fromCharCode(o)); return n = r(n), n } }) })(jQuery), function () { "use strict"; var e = this, t = e.jQuery; typeof e.GOVUK == "undefined" && (e.GOVUK = {}); var n = { TEMPLATE: '<section id="user-satisfaction-survey" class="visible" aria-hidden="false">  <div class="wrapper">    <h1>Tell us what you think of GOV.UK</h1>    <p class="right"><a href="#survey-no-thanks" id="survey-no-thanks">No thanks</a></p>    <p><a href="javascript:void()" id="take-survey" target="_blank">Take the 3 minute survey</a> This will open a short survey on another website</p>  </div></section>', cookieNameTakenSurvey: "govuk_takenUserSatisfactionSurvey", createEvent: function (e, t) { return ["_trackEvent", "user_satisfaction_survey", e, t, 1, !0] }, setCookieTakenSurvey: function () { GOVUK.cookie(n.cookieNameTakenSurvey, !0, { days: 120 }), t("#user-satisfaction-survey").removeClass("visible").attr("aria-hidden", "true") }, setEventHandlers: function () { var e = t("#survey-no-thanks"), r = t("#take-survey"); e.click(function (e) { return n.setCookieTakenSurvey(), GOVUK.sendToAnalytics(n.createEvent("banner_no_thanks", "No thanks clicked")), e.stopPropagation(), !1 }), r.click(function () { n.setCookieTakenSurvey(), GOVUK.sendToAnalytics(n.createEvent("banner_taken", "User taken survey")) }) }, showSurveyBar: function () { if (GOVUK.cookie(n.cookieNameTakenSurvey) === "true" || n.otherNotificationVisible()) return; t("#user-satisfaction-survey-container").append(n.TEMPLATE), n.setEventHandlers(), n.setSurveyUrl(), GOVUK.sendToAnalytics(n.createEvent("banner_shown", "Banner has been shown")) }, otherNotificationVisible: function () { return t("#banner-notification:visible, #global-cookie-message:visible, #global-browser-prompt:visible").length > 0 }, randomlyShowSurveyBar: function () { if (t("#user-satisfaction-survey-container").length <= 0) return; Math.floor(Math.random() * 50) === 0 && n.showSurveyBar() }, setSurveyUrl: function (n) { var r = t("#take-survey"), i = t("#user-satisfaction-survey-container").data("survey-url"); i.indexOf("?c=") === -1 && (i += "?c=" + e.location.pathname), r.attr("href", i) } }; e.GOVUK.userSatisfaction = n }.call(this), $(document).ready(function () { $(".print-link a").attr("target", "_blank"); var e = $(".js-search-focus"); e.each(function (e, t) { $(t).val() !== "" && $(t).addClass("focus") }), e.on("focus", function (e) { $(e.target).addClass("focus") }), e.on("blur", function (e) { $(e.target).val() === "" && $(e.target).removeClass("focus") }); if (window.GOVUK && GOVUK.userSatisfaction) { var t = window.location.pathname; function n(e, t) { return e.indexOf(t) > -1 } !n(t, "/done") && !n(t, "/transaction-finished") && !n(t, "/driving-transaction-finished") && GOVUK.userSatisfaction.randomlyShowSurveyBar() } var r = $("label.selectable input[type='radio'], label.selectable input[type='checkbox']"); GOVUK.selectionButtons(r) }); var ReportAProblem = { showErrorMessage: function (e) { var t = "<h2>Sorry, we're unable to receive your message right now.</h2> <p>We have other ways for you to provide feedback on the <a href='/contact'>contact page</a>.</p>"; $(".report-a-problem-content").html(t) }, promptUserToEnterValidData: function () { ReportAProblem.enableSubmitButton(), $('<p class="error-notification">Please enter details of what you were doing.</p>').insertAfter(".report-a-problem-container h2") }, disableSubmitButton: function () { $(".report-a-problem-container .button").attr("disabled", !0) }, enableSubmitButton: function () { $(".report-a-problem-container .button").attr("disabled", !1) }, showConfirmation: function (e) { $(".report-a-problem-content").html(e.message) }, submit: function () { return $(".report-a-problem-container .error-notification").remove(), $("input#url").val(window.location), ReportAProblem.disableSubmitButton(), $.ajax({ type: "POST", url: "/contact/govuk/problem_reports", dataType: "json", data: $(".report-a-problem-container form").serialize(), success: ReportAProblem.showConfirmation, error: function (e, t) { if (t === "error" || !e.responseText) e.status == 422 ? ReportAProblem.promptUserToEnterValidData() : ReportAProblem.showErrorMessage() }, statusCode: { 500: ReportAProblem.showErrorMessage } }), !1 } }; $(document).ready(function () { var e = '<div class="report-a-problem-toggle-wrapper js-footer"><p class="report-a-problem-toggle"><a href="">Is there anything wrong with this page?</a></p></div>', t = $(".report-a-problem-container"); t.before(e), $(".report-a-problem-toggle a").on("click", function () { return t.toggle(), !1 }); var n = t.find("form"); n.append('<input type="hidden" name="javascript_enabled" value="true"/>'), n.append($('<input type="hidden" name="referrer">').val(document.referrer || "unknown")), n.submit(ReportAProblem.submit) }), function () { "use strict"; var e = this; e.GOVUK = e.GOVUK || {}; var t = e.GOVUK; t.Analytics = e.GOVUK.Analytics || {}, t.Analytics.internalSiteEvents = function () { var e = "GDS_successEvents", n = [], r = function () { var r = t.cookie(e); r ? r = jQuery.parseJSON(jQuery.base64Decode(r)) : r = [], n = r }, i = function () { r(), $(n).each(function () { t.sendToAnalytics(this) }), n = [], t.cookie(e, null) }, s = function (r) { n.push(r), t.cookie(e, jQuery.base64Encode(JSON.stringify(n)), { days: 120 }) }; return { push: s, sendAll: i } }(), t.Analytics.entryTokens = function () { var e = "GDS_analyticsTokens", n = function (e, t) { return $.inArray(e, t) !== -1 }, r = function () { return t.Analytics.getSlug(document.URL, t.Analytics.Trackers[t.Analytics.Format].slugLocation) }, i = function () { var i = JSON.parse(t.cookie(e)); i || (i = []), n(r(), i) || (i.push(r()), t.cookie(e, JSON.stringify(i), { days: 120 })) }, s = function () { var n = JSON.parse(t.cookie(e)), i = $.inArray(r(), n); i !== -1 && (n.splice(i, 1), t.cookie(e, JSON.stringify(n), { days: 120 })) }, o = function () { var i = JSON.parse(t.cookie(e)); return n(r(), i) }; return { assignToken: i, revokeToken: s, tokenExists: o } }() }.call(this), function () { "use strict"; var e = this; e.GOVUK = e.GOVUK || {}; var t = e.GOVUK; t.Analytics = t.Analytics || {}, t.Analytics.Trackers = {}, t.Analytics.trackingPrefixes = { MAINSTREAM: "MS_", INSIDE_GOV: "IG_" }, t.Analytics.Tracker = function (e, t, n) { var r = n; return r.prefix = e, r.slugLocation = t, r }, t.Analytics.Trackers.guide = new t.Analytics.Tracker(t.Analytics.trackingPrefixes.MAINSTREAM, 0, function (e) { e.trackTimeBasedSuccess(7e3), e.trackInternalLinks($("#content a")) }), t.Analytics.Trackers.transaction = new t.Analytics.Tracker(t.Analytics.trackingPrefixes.MAINSTREAM, 0, function (e) { e.trackInternalLinks($("#content a")), e.trackLinks($("#get-started a")) }), t.Analytics.Trackers.programme = new t.Analytics.Tracker(t.Analytics.trackingPrefixes.MAINSTREAM, 0, function (e) { e.trackTimeBasedSuccess(7e3), e.trackInternalLinks($("#content a")) }), t.Analytics.Trackers.answer = new t.Analytics.Tracker(t.Analytics.trackingPrefixes.MAINSTREAM, 0, function (e) { e.trackTimeBasedSuccess(7e3), e.trackInternalLinks($("#content a")) }), t.Analytics.Trackers.smart_answer = new t.Analytics.Tracker(t.Analytics.trackingPrefixes.MAINSTREAM, 0, function (e) { t.Analytics.Trackers.smart_answer.isAjaxNavigation() ? $(document).bind("smartanswerOutcome", e.trackSuccessFunc(!1)) : $(function () { $("article.outcome").length === 1 && e.trackSuccess(!0) }) }); var n = n || function () { return !!(history && history.replaceState && history.pushState) }; t.Analytics.Trackers.smart_answer.isAjaxNavigation = n, t.Analytics.Trackers.smart_answer.shouldTrackEntry = function () { return t.Analytics.isRootOfArtefact(document.URL, t.Analytics.Trackers.smart_answer.slugLocation) }, t.Analytics.Trackers.smart_answer.shouldTrackSuccess = function () { return t.Analytics.Trackers.smart_answer.isAjaxNavigation() ? t.Analytics.entryTokens.tokenExists() && !t.Analytics.isRootOfArtefact(document.URL, t.Analytics.Trackers.smart_answer.slugLocation) : t.Analytics.entryTokens.tokenExists() && $("article.outcome").length === 1 }, t.Analytics.Trackers.policy = new t.Analytics.Tracker(t.Analytics.trackingPrefixes.INSIDE_GOV, 2, function (e) { e.trackTimeBasedSuccess(3e4), e.trackInternalLinks($("#page a").filter(function () { return !t.Analytics.isLinkToFragmentInCurrentDocument(this) })) }), t.Analytics.Trackers.detailed_guidance = new t.Analytics.Tracker(t.Analytics.trackingPrefixes.INSIDE_GOV, 0, function (e) { e.trackTimeBasedSuccess(3e4), e.trackInternalLinks($("#page a")) }), t.Analytics.Trackers.news = new t.Analytics.Tracker(t.Analytics.trackingPrefixes.INSIDE_GOV, 2, function (e) { e.trackInternalLinks($("#page a")), e.trackTimeBasedSuccess(3e4) }) }.call(this), function () { "use strict"; var e = this; e.GOVUK = e.GOVUK || {}; var t = e.GOVUK; t.Analytics = t.Analytics || {}, e._gaq = e._gaq || [], t.sendToAnalytics = function (t) { e._gaq.push(t) }, t.Analytics.isTheSameArtefact = function (e, t, n) { var r = function (e) { return e.split("/").slice(0, 4 + n).join("/") }, i = r(e).replace(/#.*$/, ""), s = r(t).replace(/#.*$/, ""); return i === s }, t.Analytics.getSlug = function (e, t) { return e.split("/")[3 + t].split("#")[0].split("?")[0] }, t.Analytics.isRootOfArtefact = function (e, t) { return e.replace(/\/$/, "").split("/").slice(3 + t).length === 1 }, t.Analytics.isLinkToFragmentInCurrentDocument = function (e) { var t = e.href.split("#")[0] === document.URL.split("#")[0], n = e.hash !== ""; return t && n }, t.Analytics.startAnalytics = function () { var e = 13, n = !1, r = "none", i = t.Analytics.Format, s = t.Analytics.Trackers[i], o = function (e, t) { return typeof e == "function" ? e() : t }, u = function (e, n) { var i = t.Analytics.getSlug(document.URL, s.slugLocation); return ["_trackEvent", r + t.Analytics.Format, i, e, 0, n] }, a = function () { if (n) return; n = !0; var e = u("Success", !1); t.Analytics.isLinkToFragmentInCurrentDocument(this) ? t.sendToAnalytics(e) : t.Analytics.internalSiteEvents.push(e) }, f = function (t, n) { t.each(function () { var t = $(this); this.hostname === window.location.hostname && (t.click(a), t.keydown(function (t) { t.which === e && a.call(this, t) })) }) }, l = { trackSuccessFunc: function (e) { return e === undefined && (e = !1), function () { l.trackSuccess(e) } }, trackSuccess: function (e) { e === undefined && (e = !1); if (n) return; n = !0, t.sendToAnalytics(u("Success", e)) }, trackInternalLinks: function (e) { f(e, !1) }, trackLinks: function (e) { f(e, !0) }, trackTimeBasedSuccess: function (e) { setTimeout(l.trackSuccessFunc(!0), e) } }; t.Analytics.Trackers[i] !== undefined && (r = t.Analytics.Trackers[i].prefix); if (typeof s == "function") { var c = t.Analytics.isTheSameArtefact(document.URL, document.referrer, s.slugLocation); o(s.shouldTrackEntry, !c) && (t.sendToAnalytics(u("Entry", !0)), t.Analytics.entryTokens.assignToken()), o(s.shouldTrackSuccess, !c) && (s(l), t.Analytics.entryTokens.revokeToken()) } return t.Analytics.internalSiteEvents.sendAll(), l }, $(t.Analytics.startAnalytics) }.call(this), function () { var e = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/__utm.gif"; e += "?utmwv=5.3.9", e += "&utmn=" + Math.floor(Math.random() * parseInt("0x7fffffff", 16)), e += "&utmhn=" + encodeURIComponent(document.location.hostname), e += "&utmp=" + encodeURIComponent("/print" + document.location.pathname), e += "&utmac=UA-26179049-1", e += "&utmcc=__utma%3D999.999.999.999.999.1%3B"; var t = document.createElement("style"); t.setAttribute("type", "text/css"); var n = document.createTextNode("@media print { body:after { content: url(" + e + "); } body { *background: url(" + e + ") no-repeat; }}"); t.styleSheet ? t.styleSheet.cssText = n.nodeValue : t.appendChild(n); var r = document.getElementsByTagName("head")[0]; r && r.appendChild(t) }(), function () { "use strict"; var e = function () { _gaq.push(["_trackEvent", "Print Intent", document.location.pathname]) }; if (window.matchMedia) { var t = window.matchMedia("print"), n = 0; t.addListener(function (t) { !t.matches && n === 0 && (e(), n++, window.setTimeout(function () { n = 0 }, 1e3)) }) } window.onafterprint && (window.onafterprint = e) }(), function () { "use strict"; function t(e) { this.config = this.getConfigForCurrentPath(e), this.SCROLL_TIMEOUT_DELAY = 500; if (!this.config) { this.enabled = !1; return } this.enabled = !0, this.trackedNodes = this.buildNodes(this.config), $(window).scroll($.proxy(this.onScroll, this)), this.trackVisibleNodes() } window.GOVUK = window.GOVUK || {}, window.GOVUK.Analytics = window.GOVUK.Analytics || {}; var e = { "/": [["Heading", "Services and information"], ["Heading", "More on GOV.UK"], ["Percent", 80]], "/bank-holidays": [["Percent", 25], ["Percent", 50], ["Percent", 75]], "/jobsearch": [["Heading", "Registration"], ["Heading", "Help"]], "/register-to-vote": [["Percent", 25], ["Percent", 50], ["Percent", 75]], "/apply-uk-visa": [["Percent", 25], ["Percent", 50], ["Percent", 75]], "/student-finance-register-login": [["Heading", "Log in problems"], ["Heading", "Manage your student finance"]], "/tax-disc": [["Heading", "Other ways to apply"], ["Heading", "Help with tax discs"]], "/government/world": [["Percent", 25], ["Percent", 50], ["Percent", 75]] }; t.prototype.getConfigForCurrentPath = function (t) { for (var n in t) if (window.location.pathname == n) return t[n] }, t.prototype.buildNodes = function (n) { var r = [], i, s; for (var o = 0; o < n.length; o++) i = t[n[o][0] + "Node"], s = n[o][1], r.push(new i(s)); return r }, t.prototype.onScroll = function () { clearTimeout(this.scrollTimeout), this.scrollTimeout = setTimeout($.proxy(this.trackVisibleNodes, this), this.SCROLL_TIMEOUT_DELAY) }, t.prototype.trackVisibleNodes = function () { for (var t = 0; t < this.trackedNodes.length; t++) this.trackedNodes[t].isVisible() && !this.trackedNodes[t].alreadySeen && (this.trackedNodes[t].alreadySeen = !0, GOVUK.sendToAnalytics(["_trackEvent"].concat(this.trackedNodes[t].eventData).concat([0, !0]))) }, t.PercentNode = function (t) { this.percentage = t, this.eventData = ["ScrollTo", "Percent", String(t)] }, t.PercentNode.prototype.isVisible = function () { return this.currentScrollPercent() >= this.percentage }, t.PercentNode.prototype.currentScrollPercent = function () { var t = $(document), n = $(window); return n.scrollTop() / (t.height() - n.height()) * 100 }, t.HeadingNode = function (t) { function n(e) { var t = $("h1, h2, h3, h4, h5, h6"); for (var n = 0; n < t.length; n++) if ($.trim(t.eq(n).text()).replace(/\s/g, " ") == e) return t.eq(n) } this.$element = n(t), this.eventData = ["ScrollTo", "Heading", t] }, t.HeadingNode.prototype.isVisible = function () { return this.$element ? this.elementIsVisible(this.$element) : !1 }, t.HeadingNode.prototype.elementIsVisible = function (t) { var n = $(window), r = t.offset().top; return r > n.scrollTop() && r < n.scrollTop() + n.height() }, $().ready(function () { window.GOVUK.Analytics.scrollTracker = new t(e) }), window.GOVUK.Analytics.ScrollTracker = t }(), Function.prototype.bind || (Function.prototype.bind = function (e) { if (typeof this != "function") throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable"); var t = Array.prototype.slice.call(arguments, 1), n = this, r = function () { }, i = function () { return n.apply(this instanceof r && e ? this : e, t.concat(Array.prototype.slice.call(arguments))) }; return r.prototype = this.prototype, i.prototype = new r, i }), function () { "use strict"; var e = this, t = e.jQuery; typeof GOVUK == "undefined" && (e.GOVUK = {}); var n = function (e, n) { this.$elms = e, this.selectedClass = "selected", this.focusedClass = "focused", n !== undefined && t.each(n, function (e, t) { this[e] = t }.bind(this)), this.setEventNames(), this.getSelections(), this.bindEvents() }; n.prototype.setEventNames = function () { this.selectionEvents = "click", this.focusEvents = "focus blur" }, n.prototype.markFocused = function (e, t) { var n = e.attr("id"); t === "focused" ? e.parent("label").addClass(this.focusedClass) : e.parent("label").removeClass(this.focusedClass) }, n.prototype.bindEvents = function () { var e = this.markSelected.bind(this), n = this.markFocused.bind(this); this.$elms.on(this.selectionEvents, function (n) { e(t(n.target)) }).on(this.focusEvents, function (e) { var r = e.type === "focus" ? "focused" : "blurred"; n(t(e.target), r) }) }; var r = function (e, t) { n.apply(this, arguments) }; r.prototype.setEventNames = function () { this.selectionEvents = "click change", this.focusEvents = "focus blur" }, r.prototype.getSelections = function () { var e = this.markSelected.bind(this); this.selections = {}, t.each(this.$elms, function (n, r) { var i = t(r), s = i.attr("name"); typeof this.selections[s] == "undefined" && (this.selections[s] = !1), i.is(":checked") && e(i) }.bind(this)) }, r.prototype.bindEvents = function () { n.prototype.bindEvents.call(this) }, r.prototype.markSelected = function (e) { var t = e.attr("name"), n = this.selections[t]; n && n.parent("label").removeClass(this.selectedClass), e.parent("label").addClass(this.selectedClass), this.selections[t] = e }, r.prototype.markFocused = function (e) { n.prototype.markFocused.apply(this, arguments) }; var i = function (e, t) { n.apply(this, arguments) }; i.prototype.setEventNames = function () { n.prototype.setEventNames.call(this) }, i.prototype.getSelections = function () { var e = this.markSelected.bind(this); this.$elms.each(function (n, r) { var i = t(r); i.is(":checked") && e(i) }) }, i.prototype.bindEvents = function () { n.prototype.bindEvents.call(this) }, i.prototype.markSelected = function (e) { e.is(":checked") ? e.parent("label").addClass(this.selectedClass) : e.parent("label").removeClass(this.selectedClass) }, i.prototype.markFocused = function (e) { n.prototype.markFocused.apply(this, arguments) }, e.GOVUK.RadioButtons = r, e.GOVUK.CheckboxButtons = i; var s = function (e, t) { var n = e.filter("[type=radio]"), r = e.filter("[type=checkbox]"); n && new GOVUK.RadioButtons(n, t), r && new GOVUK.CheckboxButtons(r, t) }; e.GOVUK.selectionButtons = s }.call(this);